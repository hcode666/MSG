["import sys\ninput = sys.stdin.readline\n(n, q) = map(int, input().split())\npfactors = []\nnum = n\ni = 2\nwhile i * i <= num:\n    if num % i == 0:\n        num //= i\n        pfactors.append(i)\n    else:\n        i += 1\nif num != 1:\n    pfactors.append(num)\nnd = dict()\nkd = dict()\nfor i in pfactors:\n    nd[i] = 0\n    kd[i] = 0\nfor i in pfactors:\n    nd[i] += 1\nfor _ in range(q):\n    (t, k) = map(int, input().split())\n    if t == 1:\n        if n == 1:\n            print(1)\n        elif k == 1:\n            print(1)\n        else:\n            for i in pfactors:\n                if k % i == 0:\n                    kd[i] += 1\n                    k //= i\n            ans = 1\n            for i in kd:\n                ans *= kd[i] + 1\n            print(ans)\n            for i in kd:\n                kd[i] = 0\n    elif t == 2:\n        if n == 1:\n            if k == 1:\n                print(1)\n            else:\n                print(0)\n        elif k == 1:\n            ans = 1\n            for i in nd:\n                ans *= nd[i] + 1\n            print(ans)\n        elif n % k != 0:\n            print(0)\n        else:\n            for i in nd:\n                kd[i] = nd[i]\n            for i in pfactors:\n                if k % i == 0:\n                    kd[i] -= 1\n                    k //= i\n            ans = 1\n            for i in kd:\n                ans *= kd[i] + 1\n            print(ans)\n            for i in kd:\n                kd[i] = 0\n    elif n == 1:\n        if k == 1:\n            print(0)\n        else:\n            print(1)\n    elif k == 1:\n        print(0)\n    elif n % k != 0:\n        ans = 1\n        for i in nd:\n            ans *= nd[i] + 1\n        print(ans)\n    else:\n        ans1 = 1\n        for i in nd:\n            ans1 *= nd[i] + 1\n        for i in nd:\n            kd[i] = nd[i]\n        for i in pfactors:\n            if k % i == 0:\n                kd[i] -= 1\n                k //= i\n        ans2 = 1\n        for i in kd:\n            ans2 *= kd[i] + 1\n        print(ans1 - ans2)\n        for i in kd:\n            kd[i] = 0", "import sys\ninput = sys.stdin.readline\n(n, q) = map(int, input().split())\npfactors = []\nnum = n\ni = 2\nwhile i * i <= num:\n    if num % i == 0:\n        num //= i\n        pfactors.append(i)\n    else:\n        i += 1\nif num != 1:\n    pfactors.append(num)\nnd = dict()\nkd = dict()\nfor i in pfactors:\n    nd[i] = 0\n    kd[i] = 0\nfor i in pfactors:\n    nd[i] += 1\nfor _ in range(q):\n    (t, k) = map(int, input().split())\n    if t == 1:\n        if n == 1:\n            print(1)\n        elif k == 1:\n            print(1)\n        else:\n            for i in pfactors:\n                if k % i == 0:\n                    kd[i] += 1\n                    k //= i\n            ans = 1\n            for i in kd:\n                ans *= kd[i] + 1\n            print(ans)\n            for i in kd:\n                kd[i] = 0\n    elif t == 2:\n        if n == 1:\n            if k == 1:\n                print(1)\n            else:\n                print(0)\n        elif k == 1:\n            ans = 1\n            for i in nd:\n                ans *= nd[i] + 1\n            print(ans)\n        elif n % k != 0:\n            print(0)\n        else:\n            for i in nd:\n                kd[i] = nd[i]\n            for i in pfactors:\n                if k % i == 0:\n                    kd[i] -= 1\n                    k //= i\n            ans = 1\n            for i in kd:\n                ans *= kd[i] + 1\n            print(ans)\n            for i in kd:\n                kd[i] = 0\n    elif n == 1:\n        if k == 1:\n            print(0)\n        else:\n            print(1)\n    elif k == 1:\n        print(0)\n    elif n % k != 0:\n        ans = 1\n        for i in nd:\n            ans *= nd[i] + 1\n        print(ans)\n    else:\n        ans1 = 1\n        for i in nd:\n            ans1 *= nd[i] + 1\n        for i in nd:\n            kd[i] = nd[i]\n        for i in pfactors:\n            if k % i == 0:\n                kd[i] -= 1\n                k //= i\n        ans2 = 1\n        for i in kd:\n            ans2 *= kd[i] + 1\n        print(ans1 - ans2)\n        for i in kd:\n            kd[i] = 0"]