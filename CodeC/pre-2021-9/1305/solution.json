["for _ in range(int(input())):\n    (n, A, B) = (int(input()), [], [])\n    for _ in range(n):\n        A.append(input().split())\n    for _ in range(n):\n        B.append(input().split())\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j] and A[i][j] == B[j][i]:\n                for k in range(n):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    if A == B:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    (n, A, B) = (int(input()), [], [])\n    for _ in range(n):\n        A.append(input().split())\n    for _ in range(n):\n        B.append(input().split())\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j] and A[i][j] == B[j][i]:\n                for k in range(n):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    if A == B:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    (n, A, B) = (int(input()), [], [])\n    for _ in range(n):\n        A.append(input().split())\n    for _ in range(n):\n        B.append(input().split())\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j] and A[i][j] == B[j][i]:\n                for k in range(n):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    if A == B:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    n = int(input())\n    a = []\n    b = []\n    Flag = False\n    for i in range(n):\n        a1 = list(map(int, input().split()))\n        a.append(a1)\n    for i in range(n):\n        b1 = list(map(int, input().split()))\n        b.append(b1)\n    for i in range(n):\n        for j in range(n):\n            if a[i][j] != b[i][j]:\n                for k in range(n):\n                    (a[j][k], a[k][j]) = (a[k][j], a[j][k])\n    for i in range(n):\n        for j in range(n):\n            if a[i][j] != b[i][j]:\n                Flag = True\n                break\n        if Flag:\n            break\n    if Flag:\n        print('No')\n    else:\n        print('Yes')", "for _ in range(int(input())):\n    N = int(input())\n    array_A = []\n    for x in range(N):\n        a = [int(x) for x in input().split()]\n        array_A.append(a)\n    array_B = []\n    for y in range(N):\n        b = [int(x) for x in input().split()]\n        array_B.append(b)\n    for i in range(N):\n        for j in range(N):\n            if array_A[i][j] != array_B[i][j]:\n                for k in range(N):\n                    temp = array_A[k][j]\n                    array_A[k][j] = array_A[j][k]\n                    array_A[j][k] = temp\n    if array_A == array_B:\n        print('Yes')\n    else:\n        print('No')", "for p in range(int(input())):\n    n = int(input())\n    A = []\n    B = []\n    flag = 1\n    for row in range(n):\n        A.append(list(map(int, input().split())))\n    for row in range(n):\n        B.append(list(map(int, input().split())))\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j]:\n                if A[j][i] == B[i][j] and i != j:\n                    for k in range(n):\n                        (A[j][k], A[k][j]) = (A[k][j], A[j][k])\n                else:\n                    flag = 0\n                    break\n        if not flag:\n            break\n    if flag and A == B:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    (n, a, b) = (int(input()), [], [])\n    for i in range(n):\n        a.append(input().split())\n    for i in range(n):\n        b.append(input().split())\n    flag = True\n    for i in range(n):\n        if a[i][i] != b[i][i]:\n            flag = False\n            break\n    if not flag:\n        print('No')\n        continue\n    flag = False\n    for i in range(n):\n        for j in range(n):\n            if a[i][j] == b[i][j]:\n                continue\n            if a[i][j] != b[i][j] and a[j][i] == b[i][j]:\n                for k in range(n):\n                    (a[j][k], a[k][j]) = (a[k][j], a[j][k])\n            else:\n                flag = True\n                break\n        if flag:\n            break\n    if flag:\n        print('No')\n        continue\n    if a == b:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    (n, A, B) = (int(input()), [], [])\n    for _ in range(n):\n        A.append(input().split())\n    for _ in range(n):\n        B.append(input().split())\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j]:\n                for k in range(n):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    if A == B:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    (n, A, B) = (int(input()), [], [])\n    for _ in range(n):\n        A.append(input().split())\n    for _ in range(n):\n        B.append(input().split())\n    for i in range(n):\n        for j in range(n):\n            if A[i][j] != B[i][j] and A[i][j] == B[j][i]:\n                for k in range(n):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    if A == B:\n        print('Yes')\n    else:\n        print('No')", "t = int(input())\nfor _ in range(t):\n    n = int(input())\n    a = []\n    b = []\n    for i in range(n):\n        line = [int(i) for i in input().split()]\n        a.append(line)\n    for i in range(n):\n        line = [int(i) for i in input().split()]\n        b.append(line)\n    for i in range(n):\n        for j in range(n):\n            if a[i][j] != b[i][j]:\n                for k in range(n):\n                    (a[k][j], a[j][k]) = (a[j][k], a[k][j])\n    if a == b:\n        print('Yes')\n    else:\n        print('No')", "t = int(input())\nfor _ in range(t):\n    n = int(input())\n    a = []\n    b = []\n    for i in range(n):\n        line = [int(i) for i in input().split()]\n        a.append(line)\n    for i in range(n):\n        line = [int(i) for i in input().split()]\n        b.append(line)\n    for i in range(n):\n        for j in range(n):\n            if a[i][j] != b[i][j]:\n                if b[i][j] == a[j][i]:\n                    c = []\n                    for k in range(n):\n                        c.append(a[k][j])\n                    d = a[j]\n                    a[j] = c\n                    for k in range(n):\n                        a[k][j] = d[k]\n    if a == b:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    N = int(input())\n    A = []\n    B = []\n    flag = True\n    for i in range(N):\n        A.append([int(i) for i in input().split(' ')])\n    for i in range(N):\n        B.append([int(x) for x in input().split(' ')])\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                for k in range(N):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                flag = False\n                break\n    if flag:\n        print('Yes')\n    else:\n        print('No')", "for _ in range(int(input())):\n    N = int(input())\n    A = []\n    B = []\n    for i in range(N):\n        A.append([int(i) for i in input().split(' ')])\n    for i in range(N):\n        B.append([int(i) for i in input().split(' ')])\n    flag = True\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                for k in range(N):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                flag = False\n                break\n    if flag:\n        print('Yes')\n    else:\n        print('No')", "t = int(input())\nwhile t:\n    t -= 1\n    n = int(input())\n    arr1 = []\n    arr2 = []\n    f = 0\n    for i in range(n):\n        arr1.append(list(map(int, input().strip().split())))\n    for i in range(n):\n        arr2.append(list(map(int, input().strip().split())))\n    for i in range(n):\n        for j in range(n):\n            if arr1[i][j] != arr2[i][j]:\n                for k in range(n):\n                    tmp = arr1[j][k]\n                    arr1[j][k] = arr1[k][j]\n                    arr1[k][j] = tmp\n    for i in range(n):\n        for j in range(n):\n            if arr1[i][j] != arr2[i][j]:\n                f = 1\n                break\n        if f == 1:\n            break\n    if f == 1:\n        print('No')\n    else:\n        print('Yes')", "t = int(input())\nwhile t > 0:\n    t -= 1\n    n = int(input())\n    l1 = []\n    l2 = []\n    for i in range(n):\n        l1.append([int(x) for x in input().split()])\n    for i in range(n):\n        l2.append([int(x) for x in input().split()])\n    theer = True\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] == l2[i][j]:\n                if not l1[j][i] == l2[j][i]:\n                    theer = False\n                    break\n            if l1[i][j] == l2[j][i]:\n                if not l1[j][i] == l2[i][j]:\n                    theer = False\n                    break\n    if not theer:\n        print('No')\n        continue\n\n    def transpose(l1, j):\n        jthrow = l1[j]\n        jthcol = []\n        for i in range(len(l1)):\n            jthcol.append(l1[i][j])\n            l1[i][j] = jthrow[i]\n        l1[j] = jthcol\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] == l2[i][j]:\n                continue\n            else:\n                transpose(l1, j)\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] != l2[i][j]:\n                theer = False\n                break\n    if not theer:\n        print('No')\n        continue\n    else:\n        print('Yes')\n        continue", "for _ in range(int(input())):\n    N = int(input())\n    A = []\n    B = []\n    for i in range(N):\n        A.append([int(i) for i in input().split(' ')])\n    for i in range(N):\n        B.append([int(i) for i in input().split(' ')])\n    flag = True\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                for k in range(N):\n                    (A[k][j], A[j][k]) = (A[j][k], A[k][j])\n    for i in range(N):\n        for j in range(N):\n            if A[i][j] != B[i][j]:\n                flag = False\n                break\n    if flag:\n        print('Yes')\n    else:\n        print('No')", "def main():\n    for _ in range(int(input())):\n        n = int(input())\n        m1 = []\n        m2 = []\n        for i in range(n):\n            l = list(map(int, input().split()))\n            m1.append(l)\n        for i in range(n):\n            l = list(map(int, input().split()))\n            m2.append(l)\n        for i in range(n):\n            for j in range(n):\n                if m1[i][j] != m2[i][j] and m1[j][i] == m2[i][j]:\n                    temp = []\n                    for k in range(n):\n                        temp.append(m1[k][j])\n                    x = m1[j]\n                    m1[j] = temp\n                    for k in range(n):\n                        m1[k][j] = x[k]\n        if m1 == m2:\n            print('Yes')\n        else:\n            print('No')\nmain()", "t = int(input())\nwhile t > 0:\n    t -= 1\n    n = int(input())\n    l1 = []\n    l2 = []\n    for i in range(n):\n        l1.append([int(x) for x in input().split()])\n    for i in range(n):\n        l2.append([int(x) for x in input().split()])\n    theer = True\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] == l2[i][j]:\n                if not l1[j][i] == l2[j][i]:\n                    theer = False\n                    break\n            if l1[i][j] == l2[j][i]:\n                if not l1[j][i] == l2[i][j]:\n                    theer = False\n                    break\n    if not theer:\n        print('No')\n        continue\n\n    def transpose(l1, j):\n        jthrow = l1[j]\n        jthcol = []\n        for i in range(len(l1)):\n            jthcol.append(l1[i][j])\n            l1[i][j] = jthrow[i]\n        l1[j] = jthcol\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] == l2[i][j]:\n                continue\n            else:\n                transpose(l1, j)\n    for i in range(n):\n        for j in range(n):\n            if l1[i][j] != l2[i][j]:\n                theer = False\n                break\n    if not theer:\n        print('No')\n        continue\n    else:\n        print('Yes')\n        continue"]