["def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "def grundy(g):\n    if g in gdic:\n        return gdic[g]\n    lg = len(g)\n    subg = set()\n    for (ln, w) in words:\n        pos = g.find(w)\n        while pos >= 0:\n            gpre = grundy(g[:pos])\n            gpost = grundy(g[pos + ln:])\n            subg.add(gpre ^ gpost)\n            pos = g.find(w, pos + 1)\n    if len(subg) == 0:\n        gdic[g] = 0\n    else:\n        mex = 0\n        while mex in subg:\n            mex += 1\n        gdic[g] = mex\n    return gdic[g]\nfor _ in range(int(input())):\n    game = input().strip()\n    n = int(input())\n    wordset = set((input().strip() for _ in range(n)))\n    words = [(len(w), w) for w in wordset]\n    gdic = {'': 0}\n    print('Teddy' if grundy(game) > 0 else 'Tracy')", "import re\n\ndef mex(s):\n    m = 0\n    while m in s:\n        m += 1\n    return m\n\ndef grundy(s, i, j, l, dp):\n    if i > j:\n        return 0\n    if (i, j) in dp:\n        return dp[i, j]\n    set1 = set([])\n    for each in l:\n        for m in re.finditer(each, s[i:j + 1]):\n            index1 = m.start()\n            index1 += i\n            set1.add(grundy(s, i, index1 - 1, l, dp) ^ grundy(s, index1 + len(each), j, l, dp))\n    dp[i, j] = mex(set1)\n    return dp[i, j]\nt = int(input())\nfor tp in range(t):\n    s = input()\n    n = int(input())\n    l = []\n    dp = {}\n    for i in range(n):\n        line = input()\n        l.append(line)\n    temp = grundy(s, 0, len(s) - 1, l, dp)\n    if temp == 0:\n        print('Tracy')\n    else:\n        print('Teddy')"]