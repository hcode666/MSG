["T = int(input())\nMDL = 1000000007\nfor t in range(T):\n    (up, d, m, N) = map(int, input().split())\n    dp = [0] * N\n    for i in range(N):\n        p = pow(i, d, N)\n        dp[p] += max(0, (up - i) // N + 1)\n    ans = 0\n    for x1 in range(N):\n        for x2 in range(N):\n            for x3 in range(N):\n                if (x1 + x2 + x3) % N == m:\n                    ans += dp[x1] * dp[x2] * dp[x3]\n                    ans %= MDL\n    print(ans)", "T = int(input())\nMDL = 1000000007\nfor t in range(T):\n    (up, d, m, N) = map(int, input().split())\n    dp = [0] * N\n    for i in range(N):\n        p = pow(i, d, N)\n        dp[p] += max(0, (up - i) // N + 1)\n    ans = 0\n    for x1 in range(N):\n        for x2 in range(N):\n            for x3 in range(N):\n                if (x1 + x2 + x3) % N == m:\n                    ans += dp[x1] * dp[x2] * dp[x3]\n                    ans %= MDL\n    print(ans)", "T = int(input())\nMO = 1000000007\nfor t in range(T):\n    (up, d, m, N) = map(int, input().split())\n    dp = [0] * N\n    for i in range(N):\n        p = pow(i, d, N)\n        dp[p] += max(0, (up - i) // N + 1)\n    ans = 0\n    for x1 in range(N):\n        for x2 in range(N):\n            for x3 in range(N):\n                if (x1 + x2 + x3) % N == m:\n                    ans += dp[x1] * dp[x2] * dp[x3]\n                    ans %= MO\n    print(ans)", "for _ in range(int(input())):\n    (upper, power, r, mod) = map(int, input().split())\n    (dp, ans, z) = ([0] * mod, 0, 1000000007)\n    for i in range(mod):\n        dp[pow(i, power, mod)] += max(0, (upper - i) // mod + 1)\n    for a in range(mod):\n        for b in range(mod):\n            for c in range(mod):\n                if (a + b + c) % mod == r:\n                    ans = (ans + dp[a] * dp[b] * dp[c]) % z\n    print(ans)", "t = int(input())\nz = 1000000007\nwhile t:\n    t -= 1\n    (upper, power, r, mod) = map(int, input().split())\n    dp = [0] * mod\n    for i in range(mod):\n        p = pow(i, power, mod)\n        dp[p] += max(0, (upper - i) // mod + 1)\n    ans = 0\n    for a in range(mod):\n        for b in range(mod):\n            for c in range(mod):\n                if (a + b + c) % mod == r:\n                    ans += dp[a] * dp[b] * dp[c]\n                    ans %= z\n    print(ans)", "T = int(input())\nfor ti in range(T):\n    ans = 0\n    (M, d, m, N) = map(int, input().split())\n    a = []\n    for i in range(N):\n        a.append(pow(i, d, N))\n    delta = M // N\n    nM = M % N\n    MO = 1000000007\n    for i in range(min(N, M + 1)):\n        for j in range(min(N, M + 1)):\n            for k in range(min(N, M + 1)):\n                if (a[i] + a[j] + a[k]) % N == m:\n                    ans = (ans + (delta + (i <= nM)) * (delta + (j <= nM)) % MO * (delta + (k <= nM)) % MO) % MO\n    print(ans)", "import sys\nT = int(input())\nAns = ''\nfor t in range(T):\n    (upper, d, m, N) = map(int, input().split())\n    L = []\n    ways = 0\n    for i in range(N):\n        L.append(pow(i, d, N))\n    for i in range(N):\n        x = L[i]\n        if i > upper:\n            break\n        for j in range(N):\n            y = L[j]\n            if j > upper:\n                break\n            for k in range(N):\n                z = L[k]\n                if k > upper:\n                    break\n                if (x + y + z) % N == m:\n                    w1 = upper // N\n                    w2 = upper // N\n                    w3 = upper // N\n                    e = upper % N\n                    if e >= i:\n                        w1 += 1\n                    if e >= j:\n                        w2 += 1\n                    if e >= k:\n                        w3 += 1\n                    ways += int(w1 * w2 * w3)\n    Ans += str(ways % 1000000007) + '\\n'\nsys.stdout.write(Ans)"]