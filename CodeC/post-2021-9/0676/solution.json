["from sys import setrecursionlimit\nsetrecursionlimit(10 ** 9)\nP = -123123123\n\ndef solve(u=0, p=P):\n    if len(g[u]) == 1:\n        if a[u] == 0:\n            return (float('inf'), 1)\n        return (a[u], 1)\n    s = l = 0\n    for v in g[u]:\n        if v != p:\n            (x, y) = solve(v, u)\n            s += x\n            l += y\n    if a[u] == 0:\n        return (s, l)\n    return (min(s, a[u] * l), l)\nfor _ in range(int(input())):\n    n = int(input())\n    g = [[] for _ in range(n)]\n    g[0].append(P)\n    for _ in range(n - 1):\n        (u, v) = map(int, input().split())\n        g[u - 1].append(v - 1)\n        g[v - 1].append(u - 1)\n    a = list(map(int, input().split()))\n    if n == 1:\n        print(a[0])\n        continue\n    print(solve()[0])", "from sys import setrecursionlimit\nsetrecursionlimit(10 ** 9)\nP = -123123123\n\ndef solve(u=0, p=P):\n    if len(g[u]) == 1:\n        if a[u] == 0:\n            return (float('inf'), 1)\n        return (a[u], 1)\n    s = l = 0\n    for v in g[u]:\n        if v != p:\n            (x, y) = solve(v, u)\n            s += x\n            l += y\n    if a[u] == 0:\n        return (s, l)\n    return (min(s, a[u] * l), l)\nfor _ in range(int(input())):\n    n = int(input())\n    g = [[] for _ in range(n)]\n    g[0].append(P)\n    for _ in range(n - 1):\n        (u, v) = map(int, input().split())\n        g[u - 1].append(v - 1)\n        g[v - 1].append(u - 1)\n    a = list(map(int, input().split()))\n    if n == 1:\n        print(a[0])\n        continue\n    print(solve()[0])"]