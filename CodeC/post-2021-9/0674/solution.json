["mod = 1000000007\n\ndef mul(a, n, mod):\n    ans = 1\n    while n > 0:\n        ans = ans * a % mod\n        n -= 1\n    return ans\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    aa = list()\n    for i in range(n):\n        aa.append([a[i], i])\n    aa.append([n + 1, -1])\n    aa.sort()\n    ans = 1\n    l = 0\n    r = 1\n    while r <= n:\n        while aa[r - 1][1] < aa[r][1]:\n            r += 1\n        ans = ((ans + mul(2, r - l, mod)) % mod - 1 + mod) % mod\n        l = r\n        r += 1\n    print(ans)", "mod = 1000000007\n\ndef mul(a, n, mod):\n    ans = 1\n    while n > 0:\n        ans = ans * a % mod\n        n -= 1\n    return ans\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    aa = list()\n    for i in range(n):\n        aa.append([a[i], i])\n    aa.append([n + 1, -1])\n    aa.sort()\n    ans = 1\n    l = 0\n    r = 1\n    while r <= n:\n        while aa[r - 1][1] < aa[r][1]:\n            r += 1\n        ans = ((ans + mul(2, r - l, mod)) % mod - 1 + mod) % mod\n        l = r\n        r += 1\n    print(ans)", "mod = 1000000007\n\ndef mul(a, n, mod):\n    ans = 1\n    while n > 0:\n        ans = ans * a % mod\n        n -= 1\n    return ans\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    aa = list()\n    for i in range(n):\n        aa.append([a[i], i])\n    aa.append([n + 1, -1])\n    aa.sort()\n    ans = 1\n    l = 0\n    r = 1\n    while r <= n:\n        while aa[r - 1][1] < aa[r][1]:\n            r += 1\n        ans = ((ans + mul(2, r - l, mod)) % mod - 1 + mod) % mod\n        l = r\n        r += 1\n    print(ans)", "mod = 1000000007\n\ndef mul(a, n, mod):\n    ans = 1\n    while n > 0:\n        ans = ans * a % mod\n        n -= 1\n    return ans\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    aa = list()\n    for i in range(n):\n        aa.append([a[i], i])\n    aa.append([n + 1, -1])\n    aa.sort()\n    ans = 1\n    l = 0\n    r = 1\n    while r <= n:\n        while aa[r - 1][1] < aa[r][1]:\n            r += 1\n        ans = ((ans + mul(2, r - l, mod)) % mod - 1 + mod) % mod\n        l = r\n        r += 1\n    print(ans)", "mod = 1000000007\n\ndef mul(a, n, mod):\n    ans = 1\n    while n > 0:\n        ans = ans * a % mod\n        n -= 1\n    return ans\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    aa = list()\n    for i in range(n):\n        aa.append([a[i], i])\n    aa.append([n + 1, -1])\n    aa.sort()\n    ans = 1\n    l = 0\n    r = 1\n    while r <= n:\n        while aa[r - 1][1] < aa[r][1]:\n            r += 1\n        ans = ((ans + mul(2, r - l, mod)) % mod - 1 + mod) % mod\n        l = r\n        r += 1\n    print(ans)"]