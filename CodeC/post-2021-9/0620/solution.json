["t = int(input())\nfor _ in range(t):\n    (n, k) = map(int, input().split())\n    s = input()\n    zs = [0]\n    os = [0]\n    for c in s:\n        if c == '1':\n            zs.append(zs[-1])\n            os.append(os[-1] + 1)\n        else:\n            zs.append(zs[-1] + 1)\n            os.append(os[-1])\n    tzs = zs[-1]\n    tos = os[-1]\n    zr = []\n    ol = []\n    for i in range(n):\n        if s[i] == '1':\n            v = tzs - zs[i + 1]\n            if v == 0:\n                break\n            else:\n                zr.append(v)\n    for i in range(n - 1, -1, -1):\n        if s[i] == '0':\n            v = os[i + 1]\n            if v == 0:\n                break\n            else:\n                ol.append(v)\n    if k >= len(zr) or k >= len(ol):\n        print(0)\n        continue\n    a1 = [0]\n    for kk in zr:\n        a1.append(a1[-1] + kk)\n    a2 = [0]\n    for kk in ol:\n        a2.append(a2[-1] + kk)\n    mv = float('inf')\n    diff = sum(zr)\n    for i in range(k + 1):\n        j = k - i\n        mv = min(mv, diff - a1[i] - a2[j] + i * j)\n    print(max(0, mv))", "t = int(input())\nfor _ in range(t):\n    (n, k) = map(int, input().split())\n    s = input()\n    zs = [0]\n    os = [0]\n    for c in s:\n        if c == '1':\n            zs.append(zs[-1])\n            os.append(os[-1] + 1)\n        else:\n            zs.append(zs[-1] + 1)\n            os.append(os[-1])\n    tzs = zs[-1]\n    tos = os[-1]\n    zr = []\n    ol = []\n    for i in range(n):\n        if s[i] == '1':\n            v = tzs - zs[i + 1]\n            if v == 0:\n                break\n            else:\n                zr.append(v)\n    for i in range(n - 1, -1, -1):\n        if s[i] == '0':\n            v = os[i + 1]\n            if v == 0:\n                break\n            else:\n                ol.append(v)\n    if k >= len(zr) or k >= len(ol):\n        print(0)\n        continue\n    a1 = [0]\n    for kk in zr:\n        a1.append(a1[-1] + kk)\n    a2 = [0]\n    for kk in ol:\n        a2.append(a2[-1] + kk)\n    mv = float('inf')\n    diff = sum(zr)\n    for i in range(k + 1):\n        j = k - i\n        mv = min(mv, diff - a1[i] - a2[j] + i * j)\n    print(max(0, mv))", "tl = int(input())\nwhile tl:\n    tl -= 1\n    (n, k) = map(int, input().split())\n    a = str(input())\n    c0 = 0\n    c1 = 0\n    a0 = []\n    a1 = []\n    for i in a:\n        if i == '0':\n            c0 += 1\n        else:\n            c1 += 1\n    ans = 0\n    temp = c0\n    for i in a:\n        if i == '1':\n            ans += temp\n            a1.append(temp)\n        else:\n            temp -= 1\n    temp1 = c1\n    for i in reversed(a):\n        if i == '0':\n            a0.append(temp1)\n        else:\n            temp1 -= 1\n    if k >= min(len(a0), len(a1)):\n        print(0)\n    else:\n        f = 0\n        for i in range(k):\n            f += a0[i]\n        fans = ans - f\n        for i in range(k):\n            f += a1[i] - a0[k - i - 1] + (i - (k - i - 1))\n            fans = min(fans, ans - f)\n        if fans < 0:\n            print(0)\n        else:\n            print(fans)", "tl = int(input())\nwhile tl:\n    tl -= 1\n    (n, k) = map(int, input().split())\n    a = str(input())\n    c0 = 0\n    c1 = 0\n    a0 = []\n    a1 = []\n    for i in a:\n        if i == '0':\n            c0 += 1\n        else:\n            c1 += 1\n    ans = 0\n    temp = c0\n    for i in a:\n        if i == '1':\n            ans += temp\n            a1.append(temp)\n        else:\n            temp -= 1\n    temp1 = c1\n    for i in reversed(a):\n        if i == '0':\n            a0.append(temp1)\n        else:\n            temp1 -= 1\n    if k >= min(len(a0), len(a1)):\n        print(0)\n    else:\n        f = 0\n        for i in range(k):\n            f += a0[i]\n        fans = ans - f\n        for i in range(k):\n            f += a1[i] - a0[k - i - 1] + (i - (k - i - 1))\n            fans = min(fans, ans - f)\n        if fans < 0:\n            print(0)\n        else:\n            print(fans)", "tl = int(input())\nwhile tl:\n    tl -= 1\n    (n, k) = map(int, input().split())\n    a = str(input())\n    c0 = 0\n    c1 = 0\n    a0 = []\n    a1 = []\n    for i in a:\n        if i == '0':\n            c0 += 1\n        else:\n            c1 += 1\n    ans = 0\n    temp = c0\n    for i in a:\n        if i == '1':\n            ans += temp\n            a1.append(temp)\n        else:\n            temp -= 1\n    temp1 = c1\n    for i in reversed(a):\n        if i == '0':\n            a0.append(temp1)\n        else:\n            temp1 -= 1\n    if k >= min(len(a0), len(a1)):\n        print(0)\n    else:\n        f = 0\n        for i in range(k):\n            f += a0[i]\n        fans = ans - f\n        for i in range(k):\n            f += a1[i] - a0[k - i - 1] + (i - (k - i - 1))\n            fans = min(fans, ans - f)\n        if fans < 0:\n            print(0)\n        else:\n            print(fans)", "from collections import Counter\n\ndef cis(s):\n    z = 0\n    ans = 0\n    for i in reversed(range(len(s))):\n        if s[i] == '0':\n            z += 1\n        else:\n            ans += z\n    return ans\nt = int(input())\nwhile t:\n    t -= 1\n    x = list(map(int, input().split()))\n    a = input()\n    ze = 0\n    ti = ma = cis(a)\n    z = []\n    o = []\n    for i in range(x[0]):\n        if a[i] == '1':\n            ze += 1\n        elif ze:\n            z.insert(0, ze)\n    ze = 0\n    for i in reversed(range(x[0])):\n        if a[i] == '0':\n            ze += 1\n        elif ze:\n            o.insert(0, ze)\n    su = 0\n    for i in range(len(o)):\n        su += o[i]\n        o[i] = su\n    su = 0\n    for i in range(len(z)):\n        su += z[i]\n        z[i] = su\n    if min(len(o), len(z)) <= x[1]:\n        print('0')\n    elif x[1] == 1:\n        ma = min(ti, ti - o[x[1] - 1])\n        ma = min(ma, ti - z[x[1] - 1])\n        print(ma)\n    elif x[1] == 0:\n        print(ti)\n    else:\n        ma = min(ti, ti - o[x[1] - 1])\n        ma = min(ma, ti - z[x[1] - 1])\n        for i in range(x[1] - 1):\n            ans = ti - o[i] - z[x[1] - i - 2] + max(i + 1, x[1] - i - 1) * min(i + 1, x[1] - i - 1)\n            ma = min(ans, ma)\n        print(ma)", "tl = int(input())\nwhile tl:\n    tl -= 1\n    (n, k) = map(int, input().split())\n    a = str(input())\n    c0 = 0\n    c1 = 0\n    a0 = []\n    a1 = []\n    for i in a:\n        if i == '0':\n            c0 += 1\n        else:\n            c1 += 1\n    ans = 0\n    temp = c0\n    for i in a:\n        if i == '1':\n            ans += temp\n            a1.append(temp)\n        else:\n            temp -= 1\n    temp1 = c1\n    for i in reversed(a):\n        if i == '0':\n            a0.append(temp1)\n        else:\n            temp1 -= 1\n    if k >= min(len(a0), len(a1)):\n        print(0)\n    else:\n        f = 0\n        for i in range(k):\n            f += a0[i]\n        fans = ans - f\n        for i in range(k):\n            f += a1[i] - a0[k - i - 1] + (i - (k - i - 1))\n            fans = min(fans, ans - f)\n        if fans < 0:\n            print(0)\n        else:\n            print(fans)", "t = int(input())\nwhile t:\n    t -= 1\n    (n, k) = map(int, input().split())\n    a = str(input())\n    c0 = 0\n    c1 = 0\n    a0 = []\n    a1 = []\n    for i in a:\n        if i == '0':\n            c0 += 1\n        else:\n            c1 += 1\n    ans = 0\n    temp = c0\n    for i in a:\n        if i == '1':\n            ans += temp\n            a1.append(temp)\n        else:\n            temp -= 1\n    temp1 = c1\n    for i in reversed(a):\n        if i == '0':\n            a0.append(temp1)\n        else:\n            temp1 -= 1\n    if k >= min(len(a0) - a0.count(0), len(a1) - a1.count(0)):\n        print(0)\n    else:\n        f = 0\n        for i in range(k):\n            f += a0[i]\n        fans = ans - f\n        for i in range(k):\n            f += a1[i] - a0[k - 1 - i] - (k - 1 - i) + i\n            fans = min(fans, ans - f)\n        if fans < 0:\n            print(0)\n        else:\n            print(fans)", "for _ in range(int(input())):\n    (N, K) = map(int, input().split())\n    S = list(input())\n    (l, r) = (0, N - 1)\n    while l < r and S[l] == '0':\n        l += 1\n    while l < r and S[r] == '1':\n        r -= 1\n    A = []\n    z = 0\n    s = 0\n    for i in range(r, l - 1, -1):\n        if S[i] == '0':\n            z += 1\n        else:\n            A.append((i, z))\n            s += z\n    A = A[::-1][:K]\n    o = r - l + 1 - z\n    if K >= o or K >= z:\n        print(0)\n        continue\n    for i in A:\n        s -= i[1]\n        o -= 1\n    ans = s\n    t = 0\n    while K:\n        if S[r] == '0':\n            (i, k) = A.pop()\n            s += k - t\n            o += 1\n            s -= o\n            K -= 1\n            t += 1\n        else:\n            o -= 1\n        ans = min(ans, s)\n        r -= 1\n    print(ans)", "t = int(input())\nfor _ in range(t):\n    line = input()\n    nk = list(map(int, line.split()))\n    n = nk[0]\n    k = nk[1]\n    s = list(input())\n    i = 0\n    Zero_values = []\n    curr_value = 0\n    for item in s:\n        if item == '0':\n            Zero_values.append(curr_value)\n        else:\n            curr_value += 1\n    Ones_values = []\n    curr_value = 0\n    for i in range(n - 1, -1, -1):\n        if s[i] == '1':\n            Ones_values.append(curr_value)\n        else:\n            curr_value += 1\n    Zero_values.sort(reverse=True)\n    Ones_values.sort(reverse=True)\n    if len(Zero_values) <= k or len(Ones_values) <= k:\n        print(0)\n    else:\n        final_values = [sum(Zero_values[0:k])]\n        pure_sums = [final_values[0]]\n        for i in range(1, k + 1):\n            new_value = pure_sums[i - 1] - Zero_values[k - i] + Ones_values[i - 1]\n            pure_sums.append(new_value)\n            new_value -= i * (k - i)\n            final_values.append(new_value)\n        print(sum(Zero_values) - max(final_values))", "from collections import Counter\n\ndef cis(s):\n    z = 0\n    ans = 0\n    for i in reversed(range(len(s))):\n        if s[i] == '0':\n            z += 1\n        else:\n            ans += z\n    return ans\nt = int(input())\nwhile t:\n    t -= 1\n    x = list(map(int, input().split()))\n    a = input()\n    ze = 0\n    ti = ma = cis(a)\n    z = []\n    o = []\n    for i in range(x[0]):\n        if a[i] == '1':\n            ze += 1\n        elif ze:\n            z.insert(0, ze)\n    ze = 0\n    for i in reversed(range(x[0])):\n        if a[i] == '0':\n            ze += 1\n        elif ze:\n            o.insert(0, ze)\n    su = 0\n    for i in range(len(o)):\n        su += o[i]\n        o[i] = su\n    su = 0\n    for i in range(len(z)):\n        su += z[i]\n        z[i] = su\n    if min(len(o), len(z)) <= x[1]:\n        print('0')\n    elif x[1] == 1:\n        ma = min(ti, ti - o[x[1] - 1])\n        ma = min(ma, ti - z[x[1] - 1])\n        print(ma)\n    elif x[1] == 0:\n        print(ti)\n    else:\n        ma = min(ti, ti - o[x[1] - 1])\n        ma = min(ma, ti - z[x[1] - 1])\n        for i in range(x[1] - 1):\n            ans = ti - o[i] - z[x[1] - i - 2] + max(i + 1, x[1] - i - 1) * min(i + 1, x[1] - i - 1)\n            ma = min(ans, ma)\n        print(ma)", "t = int(input())\nfor _ in range(t):\n    (n, k) = map(int, input().split())\n    s = input()\n    zs = [0]\n    os = [0]\n    for c in s:\n        if c == '1':\n            zs.append(zs[-1])\n            os.append(os[-1] + 1)\n        else:\n            zs.append(zs[-1] + 1)\n            os.append(os[-1])\n    tzs = zs[-1]\n    tos = os[-1]\n    zr = []\n    ol = []\n    for i in range(n):\n        if s[i] == '1':\n            v = tzs - zs[i + 1]\n            if v == 0:\n                break\n            else:\n                zr.append(v)\n    for i in range(n - 1, -1, -1):\n        if s[i] == '0':\n            v = os[i + 1]\n            if v == 0:\n                break\n            else:\n                ol.append(v)\n    if k >= len(zr) or k >= len(ol):\n        print(0)\n        continue\n    a1 = [0]\n    for kk in zr:\n        a1.append(a1[-1] + kk)\n    a2 = [0]\n    for kk in ol:\n        a2.append(a2[-1] + kk)\n    mv = float('inf')\n    diff = sum(zr)\n    for i in range(k + 1):\n        j = k - i\n        mv = min(mv, diff - a1[i] - a2[j] + i * j)\n    print(max(0, mv))"]