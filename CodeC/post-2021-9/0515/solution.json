["MOD = 998244353\nnumTests = int(input(''))\nfor i in range(numTests):\n    N = int(input(''))\n    inp = input('').split()[:N]\n    elems = [int(e) for e in inp]\n    arr = elems\n    sumStartingFrom = [0] * N\n    sumSquaredStartingFrom = [0] * N\n    sumStartingFrom[N - 1] = arr[N - 1] % MOD\n    sumSquaredStartingFrom[N - 1] = arr[N - 1] * arr[N - 1] % MOD\n    for i in range(2, N + 1):\n        updateIndex = N - i\n        sumStartingFrom[updateIndex] = sumStartingFrom[updateIndex + 1] + i * arr[updateIndex]\n        sumStartingFrom[updateIndex] %= MOD\n    for i in range(2, N + 1):\n        updateIndex = N - i\n        nextIndex = updateIndex + 1\n        sumSquaredStartingFrom[updateIndex] = sumSquaredStartingFrom[nextIndex] + (i * arr[updateIndex] * arr[updateIndex] + 2 * arr[updateIndex] * sumStartingFrom[nextIndex])\n        sumSquaredStartingFrom[updateIndex] %= MOD\n    temp = arr[N - 1] ** 3 % MOD\n    ans = temp\n    for i in range(2, N + 1):\n        updateIndex = N - i\n        temp += i * arr[updateIndex] ** 3 % MOD\n        temp += 3 * arr[updateIndex] ** 2 * sumStartingFrom[updateIndex + 1] % MOD\n        temp += 3 * arr[updateIndex] * sumSquaredStartingFrom[updateIndex + 1] % MOD\n        temp %= MOD\n        ans += temp\n        ans %= MOD\n    print(ans)", "for _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    b = list()\n    v = 0\n    for i in range(n):\n        v += a[i]\n        b.append(v)\n    ans = 0\n    st = n\n    for i in range(n):\n        ans = (ans + st * b[-1 - i] ** 3) % 998244353\n        st -= 2\n    v = 0\n    w = 0\n    b_sq = list()\n    b_back = list()\n    for i in range(n):\n        v += b[i]\n        b_sq.append(v)\n        w += b[-1 - i]\n        b_back.append(w)\n    for i in range(n - 1):\n        ans = (ans + 3 * (b_back[-i - 2] * b[i] * b[i] - b[i + 1] * b[i + 1] * b_sq[i])) % 998244353\n    print(ans)", "mod = 998244353\nfor i in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    res = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(n):\n        pref += l[i]\n        res += (i + 1) * pref ** 3\n        res -= sm3\n        res -= 3 * pref ** 2 * sm1\n        res += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(res % mod)", "mod = 998244353\nt = int(input())\nfor _ in range(t):\n    n = int(input())\n    ar = list(map(int, input().split()))\n    res = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(n):\n        pref += ar[i]\n        res += (i + 1) * pref ** 3\n        res -= sm3\n        res -= 3 * pref ** 2 * sm1\n        res += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(res % mod)", "T = 998244353\nn = int(input())\nfor j in range(n):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pf = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pf += A[i]\n        ans += (i + 1) * pf ** 3\n        ans -= sm3\n        ans -= 3 * pf ** 2 * sm1\n        ans += 3 * pf * sm2\n        sm1 += pf\n        sm2 += pf ** 2\n        sm3 += pf ** 3\n    print(ans % T)", "T = 998244353\nn = int(input())\nfor j in range(n):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pf = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pf += A[i]\n        ans += (i + 1) * pf ** 3\n        ans -= sm3\n        ans -= 3 * pf ** 2 * sm1\n        ans += 3 * pf * sm2\n        sm1 += pf\n        sm2 += pf ** 2\n        sm3 += pf ** 3\n    print(ans % T)", "mod = 998244353\nt = int(input())\nfor _ in range(t):\n    n = int(input())\n    ar = list(map(int, input().split()))\n    res = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(n):\n        pref += ar[i]\n        res += (i + 1) * pref ** 3\n        res -= sm3\n        res -= 3 * pref ** 2 * sm1\n        res += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(res % mod)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sm3\n        ans -= 3 * pref ** 2 * sm1\n        ans += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sm3\n        ans -= 3 * pref ** 2 * sm1\n        ans += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sm3\n        ans -= 3 * pref ** 2 * sm1\n        ans += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sm1 = sm2 = sm3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sm3\n        ans -= 3 * pref ** 2 * sm1\n        ans += 3 * pref * sm2\n        sm1 += pref\n        sm2 += pref ** 2\n        sm3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "i = int(input())\nt = 998244353\nfor _ in range(i):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for j in range(n):\n        pref += a[j]\n        ans += (j + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % t)", "t = int(input())\nwhile t > 0:\n    n = int(input())\n    vec = [int(i) for i in input().split(' ')]\n    sum = []\n    sum.append(0)\n    for i in vec:\n        sum.append(sum[-1] + i)\n    sumofsum = []\n    sumofsum.append(0)\n    for j in range(1, n + 1):\n        sumofsum.append(sumofsum[-1] + sum[j])\n    out = 0\n    for i in range(n + 1):\n        temp = sum[i] * sum[i] * sum[i]\n        sq = sum[i] * sum[i]\n        a = 2 * i - n\n        out += a * temp\n        x = -sumofsum[n] + sumofsum[i]\n        if i > 1:\n            x += sumofsum[i - 1]\n        sq = sq * x\n        out = out - 3 * sq\n    print(out % 998244353)\n    t -= 1", "i = int(input())\nt = 998244353\nfor _ in range(i):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for j in range(n):\n        pref += a[j]\n        ans += (j + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % t)", "T = int(input())\nC = 998244353\nfor _ in range(T):\n    N = int(input())\n    A = list(map(int, input().split()))\n    SUM = 0\n    P = [0] * (N + 1)\n    P[0] = 0\n    for j in range(1, N + 1):\n        P[j] = P[j - 1] + A[j - 1]\n    Q = [0] * (N + 1)\n    Q[0] = 0\n    R = [0] * (N + 1)\n    R[N] = P[N]\n    for j in range(1, N + 1):\n        Q[j] = Q[j - 1] + P[j]\n        R[N - j] = R[N - j + 1] + P[N - j]\n    S1 = 0\n    S2 = 0\n    S3 = 0\n    S4 = 0\n    for j in range(1, N + 1):\n        S1 = (S1 + j * P[j] * P[j] * P[j]) % C\n        S2 = (S2 + 3 * P[j - 1] * P[j - 1] * R[j]) % C\n        S3 = (S3 + (N - j + 1) * P[j - 1] * P[j - 1] * P[j - 1]) % C\n        S4 = (S4 + 3 * P[j] * P[j] * Q[j - 1]) % C\n    SUM = (S1 + S2 - S3 - S4) % C\n    print(SUM)", "T = int(input())\nC = 998244353\nfor _ in range(T):\n    N = int(input())\n    A = list(map(int, input().split()))\n    SUM = 0\n    P = [0] * (N + 1)\n    P[0] = 0\n    for j in range(1, N + 1):\n        P[j] = P[j - 1] + A[j - 1]\n    Q = [0] * (N + 1)\n    Q[0] = 0\n    R = [0] * (N + 1)\n    R[N] = P[N]\n    for j in range(1, N + 1):\n        Q[j] = Q[j - 1] + P[j]\n        R[N - j] = R[N - j + 1] + P[N - j]\n    S1 = 0\n    S2 = 0\n    S3 = 0\n    S4 = 0\n    for j in range(1, N + 1):\n        S1 = (S1 + j * P[j] * P[j] * P[j]) % C\n        S2 = (S2 + 3 * P[j - 1] * P[j - 1] * R[j]) % C\n        S3 = (S3 + (N - j + 1) * P[j - 1] * P[j - 1] * P[j - 1]) % C\n        S4 = (S4 + 3 * P[j] * P[j] * Q[j - 1]) % C\n    SUM = (S1 + S2 - S3 - S4) % C\n    print(SUM)", "mod = 998244353\nfor _ in range(int(input())):\n    N = int(input())\n    A = [int(c) for c in input().split()]\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % mod)", "i = int(input())\nt = 998244353\nfor _ in range(i):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for j in range(n):\n        pref += a[j]\n        ans += (j + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % t)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "i = int(input())\nt = 998244353\nfor _ in range(i):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for j in range(n):\n        pref += a[j]\n        ans += (j + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % t)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    sum1 = sum2 = sum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= sum3\n        ans -= 3 * pref ** 2 * sum1\n        ans += 3 * pref * sum2\n        sum1 += pref\n        sum2 += pref ** 2\n        sum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "T = 998244353\nfor j in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(N):\n        pref += A[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % T)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % mod)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans % mod)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = p = pp = ps = pc = 0\n    for i in range(n):\n        p = (p + a[i]) % mod\n        ans = (ans + (i + 1) * p % mod * p % mod * p % mod) % mod\n        ans = (ans - pc) % mod\n        ans = (ans - 3 * (p * p % mod * pp) % mod % mod) % mod\n        ans = (ans + 3 * (p * ps) % mod) % mod\n        pp = (pp + p) % mod\n        ps = (ps + p * p % mod) % mod\n        pc = (pc + p * p % mod * p % mod) % mod\n    print(ans)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        ans %= mod\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans)", "for _ in range(int(input())):\n    a1 = int(input())\n    b = list(map(int, input().split()))\n    arr = []\n    s = 0\n    s_ = 0\n    s__ = 0\n    for i in b:\n        s += i\n        s_ = s * s\n        s__ = s_ * s\n        arr.append([s, s_, s__])\n    s1 = 0\n    s2 = 0\n    s3 = 0\n    p1 = []\n    for i in range(a1):\n        s1 += arr[i][0]\n        s2 += arr[i][1]\n        s3 += arr[i][2]\n        p1.append([s1, s2, s3])\n    ans = 0\n    for j in range(a1):\n        if j >= 1:\n            ans += (j + 1) * arr[j][2] + 3 * p1[j - 1][1] * arr[j][0] - 3 * arr[j][1] * p1[j - 1][0] - p1[j - 1][2]\n        else:\n            ans += arr[0][2]\n    print(ans % 998244353)", "mod = 998244353\n\ndef bin_power(num, power):\n    exp = power\n    ans = 1\n    while exp:\n        if exp % 2:\n            ans = ans * num\n            exp = exp - 1\n        else:\n            num = num * num\n            exp = exp // 2\n    return ans\nfor t in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    (pre_sum, res, post_pre_sum) = (0, 0, [0 for i in range(4)])\n    for i in range(n):\n        pre_sum += a[i]\n        res += (i + 1) * bin_power(pre_sum, 3)\n        res += 3 * pre_sum * post_pre_sum[2]\n        res -= 3 * bin_power(pre_sum, 2) * post_pre_sum[1]\n        res -= post_pre_sum[3]\n        post_pre_sum[1] += pre_sum\n        post_pre_sum[2] += bin_power(pre_sum, 2)\n        post_pre_sum[3] += bin_power(pre_sum, 3)\n    print(res % mod)", "mod = 998244353\n\ndef bin_power(num, power):\n    exp = power\n    ans = 1\n    while exp:\n        if exp % 2:\n            ans = ans * num % mod\n            exp = exp - 1\n        else:\n            num = num * num % mod\n            exp = exp // 2\n    return ans % mod\nfor t in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    (pre_sum, res, post_pre_sum) = (0, 0, [0 for i in range(4)])\n    for i in range(n):\n        pre_sum += a[i]\n        res += (i + 1) * bin_power(pre_sum, 3)\n        res += 3 * pre_sum * post_pre_sum[2]\n        res -= 3 * bin_power(pre_sum, 2) * post_pre_sum[1]\n        res -= post_pre_sum[3]\n        post_pre_sum[1] += pre_sum\n        post_pre_sum[2] += bin_power(pre_sum, 2)\n        post_pre_sum[3] += bin_power(pre_sum, 3)\n    print(res % mod)", "for _ in range(int(input())):\n    n = int(input())\n    A = list(map(int, input().split()))\n    p = []\n    sum = 0\n    for i in range(n):\n        sum += A[i]\n        sum2 = sum * sum\n        sum3 = sum2 * sum\n        p.append((sum, sum2, sum3))\n    pre = []\n    s1 = 0\n    s2 = 0\n    s3 = 0\n    for i in range(n):\n        s1 += p[i][0]\n        s2 += p[i][1]\n        s3 += p[i][2]\n        pre.append((s1, s2, s3))\n    ans = 0\n    for j in range(n):\n        if j >= 1:\n            ans += (j + 1) * p[j][2] + 3 * pre[j - 1][1] * p[j][0] - 3 * p[j][1] * pre[j - 1][0] - pre[j - 1][2]\n        else:\n            ans += p[0][2]\n    print(ans % 998244353)", "for _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = 0\n    psum = 0\n    mod = 998244353\n    pre = []\n    for i in range(4):\n        pre.append(0)\n    for i in range(n):\n        psum += a[i]\n        psum %= mod\n        ans += (i + 1) * psum ** 3\n        ans -= 3 * pre[1] * (psum * psum)\n        ans += 3 * pre[2] * psum\n        ans -= pre[3]\n        ans %= mod\n        ans = (ans + mod) % mod\n        pre[1] += psum\n        pre[2] += psum * psum\n        pre[3] += psum ** 3\n        pre[1] %= mod\n        pre[2] %= mod\n        pre[3] %= mod\n    print(ans)", "Num = 998244353\nfor _ in range(int(input())):\n    num1 = int(input())\n    li = list(map(int, input().split()))\n    pre = [0] * 3\n    answer = 0\n    bala = 0\n    for i in range(num1):\n        bala += li[i]\n        answer += (i + 1) * pow(bala, 3)\n        answer -= 3 * pre[0] * pow(bala, 2)\n        answer += 3 * pre[1] * bala\n        answer -= pre[2]\n        pre[0] += bala\n        pre[1] += pow(bala, 2)\n        pre[2] += pow(bala, 3)\n    print(answer % Num)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        ans %= mod\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        ans %= mod\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans)", "for _ in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    prefix = [0]\n    s = 0\n    for i in l:\n        s += i\n        prefix.append(s)\n    c = 0\n    x = 0\n    r = sum(prefix)\n    for i in range(len(prefix)):\n        r -= prefix[i]\n        c += prefix[i] ** 2 * (x - r)\n        x += prefix[i]\n    cal = 0\n    for i in range(len(prefix)):\n        cal += prefix[i] ** 3 * (i - (len(prefix) - (1 + i)))\n    print((cal - 3 * c) % 998244353)", "N = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    pre = [0] * 3\n    ans = 0\n    psum = 0\n    for i in range(n):\n        psum += l[i]\n        ans += (i + 1) * pow(psum, 3)\n        ans -= 3 * pre[0] * pow(psum, 2)\n        ans += 3 * pre[1] * psum\n        ans -= pre[2]\n        pre[0] += psum\n        pre[1] += pow(psum, 2)\n        pre[2] += pow(psum, 3)\n    print(ans % N)", "from functools import reduce\nt = int(input())\nwhile t > 0:\n    n = int(input())\n    l1 = input('')\n    l2 = l1.split(' ')\n    l = list(map(int, l2))\n    s2 = []\n    a1 = 0\n    for i in range(n):\n        s2.append(a1)\n        a1 = a1 + l[i]\n    s2.append(a1)\n    s1 = list(map(int, s2))\n    ans1 = 0\n    for i in range(0, n + 1):\n        ans1 = ans1 + s1[i] * s1[i] * s1[i] * (i - (n - i))\n    temp1 = 0\n    temp2 = reduce(lambda x, y: x + y, s1)\n    ans2 = 0\n    for i in range(n + 1):\n        temp2 = temp2 - s1[i]\n        ans2 = ans2 + (temp1 - temp2) * (s1[i] * s1[i])\n        temp1 = temp1 + s1[i]\n    ans = (ans1 - 3 * ans2) % 998244353\n    print(ans)\n    t -= 1", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        ans %= mod\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans)", "for x in range(int(input())):\n    abc = int(input())\n    bcd = list(map(int, input().split()))\n    cde = []\n    temp = 0\n    for i in bcd:\n        cde.append(temp)\n        temp += i\n    cde.append(temp)\n    bcd = cde[:]\n    abc = len(bcd)\n    temp1 = 0\n    for i in range(abc):\n        temp1 += bcd[i] ** 3 * (i - (abc - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(bcd)\n    for i in range(abc):\n        right -= bcd[i]\n        temp2 += bcd[i] ** 2 * (left - right)\n        left += bcd[i]\n    print((temp1 - 3 * temp2) % 998244353)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    arr = list(map(int, input().split()))\n    pre = [0] * 3\n    ans = 0\n    psum = 0\n    for i in range(n):\n        psum += arr[i]\n        ans += (i + 1) * pow(psum, 3)\n        ans -= 3 * pre[0] * pow(psum, 2)\n        ans += 3 * pre[1] * psum\n        ans -= pre[2]\n        pre[0] += psum\n        pre[1] += pow(psum, 2)\n        pre[2] += pow(psum, 3)\n    print(ans % mod)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    arr = list(map(int, input().split()))\n    pre = [0] * 3\n    ans = 0\n    psum = 0\n    for i in range(n):\n        psum += arr[i]\n        ans += (i + 1) * pow(psum, 3)\n        ans -= 3 * pre[0] * pow(psum, 2)\n        ans += 3 * pre[1] * psum\n        ans -= pre[2]\n        pre[0] += psum\n        pre[1] += pow(psum, 2)\n        pre[2] += pow(psum, 3)\n    print(ans % mod)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    arr = list(map(int, input().split()))\n    pre = [0] * 3\n    ans = 0\n    psum = 0\n    for i in range(n):\n        psum += arr[i]\n        psum %= mod\n        ans += (i + 1) * pow(psum, 3)\n        ans -= 3 * pre[0] * pow(psum, 2)\n        ans += 3 * pre[1] * psum\n        ans -= pre[2]\n        ans %= mod\n        pre[0] += psum\n        pre[1] += pow(psum, 2)\n        pre[2] += pow(psum, 3)\n        pre[0] %= mod\n        pre[1] %= mod\n        pre[2] %= mod\n    print(ans)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    m = 998244353\n    tp = 0\n    c = []\n    for i in b:\n        c.append(tp)\n        tp = tp + i\n    c.append(tp)\n    b = c[:]\n    tp1 = 0\n    a = len(b)\n    for i in range(a):\n        k = (i - (a - (i + 1))) * (b[i] * b[i] * b[i])\n        tp1 = tp1 + k\n    r = sum(b)\n    l = 0\n    tp2 = 0\n    for i in range(a):\n        r = r - b[i]\n        tp2 = tp2 + (l - r) * (b[i] * b[i])\n        l = l + b[i]\n    ans = tp1 - 3 * tp2\n    ans %= m\n    print(ans)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    arr = list(map(int, input().split()))\n    pre = [0] * 3\n    ans = 0\n    psum = 0\n    for i in range(n):\n        psum += arr[i]\n        psum %= mod\n        ans += (i + 1) * pow(psum, 3)\n        ans -= 3 * pre[0] * pow(psum, 2)\n        ans += 3 * pre[1] * psum\n        ans -= pre[2]\n        ans %= mod\n        ans = (ans + mod) % mod\n        pre[0] += psum\n        pre[1] += pow(psum, 2)\n        pre[2] += pow(psum, 3)\n        pre[0] %= mod\n        pre[1] %= mod\n        pre[2] %= mod\n    print(ans)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    summ = 0\n    p = 0\n    ps = 0\n    pc = 0\n    ans = 0\n    for i in range(n):\n        summ += l[i]\n        ans += (i + 1) * summ ** 3\n        ans -= pc\n        ans -= 3 * summ ** 2 * p\n        ans += 3 * summ * ps\n        ans %= mod\n        p += summ\n        ps += summ ** 2\n        pc += summ ** 3\n    print(ans)", "for _ in range(int(input())):\n    ant = int(input())\n    bat = list(map(int, input().split()))\n    cat = []\n    nick = 0\n    for i in bat:\n        cat.append(nick)\n        nick += i\n    cat.append(nick)\n    bat = cat[:]\n    at = len(bat)\n    nick1 = 0\n    for i in range(at):\n        nick1 += bat[i] ** 3 * (i - (at - (1 + i)))\n    nick2 = 0\n    left_side = 0\n    right_side = sum(bat)\n    for i in range(at):\n        right_side -= bat[i]\n        nick2 += bat[i] ** 2 * (left_side - right_side)\n        left_side += bat[i]\n    print((nick1 - 3 * nick2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "def mult(a, b, c, d):\n    temp = 0\n    temp = a * b * c * d\n    return temp\n\ndef fill(l1, n, l2):\n    l2.append(l1[0])\n    for i in range(1, n):\n        l2.append(l2[i - 1] + l1[i])\nfor i in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    first1 = []\n    first2 = []\n    fill(l, n, first1)\n    fill(first1, n, first2)\n    result = 0\n    for i in range(n):\n        result += mult(i + 1, first1[i], first1[i], first1[i])\n        if i != 0:\n            result -= mult(3, first1[i], first1[i], first2[i - 1])\n        result -= mult(n - 1 - i, first1[i], first1[i], first1[i])\n        result += mult(3, first2[n - 1] - first2[i], first1[i], first1[i])\n    print(result % 998244353)", "for x in range(int(input())):\n    abc = int(input())\n    bcd = list(map(int, input().split()))\n    cde = []\n    temp = 0\n    for i in bcd:\n        cde.append(temp)\n        temp += i\n    cde.append(temp)\n    bcd = cde[:]\n    abc = len(bcd)\n    temp1 = 0\n    for i in range(abc):\n        temp1 += bcd[i] ** 3 * (i - (abc - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(bcd)\n    for i in range(abc):\n        right -= bcd[i]\n        temp2 += bcd[i] ** 2 * (left - right)\n        left += bcd[i]\n    print((temp1 - 3 * temp2) % 998244353)", "mod = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    ans = pref = 0\n    psum = psum2 = psum3 = 0\n    for i in range(n):\n        pref += a[i]\n        ans += (i + 1) * pref ** 3\n        ans -= psum3\n        ans -= 3 * pref ** 2 * psum\n        ans += 3 * pref * psum2\n        ans %= mod\n        psum += pref\n        psum2 += pref ** 2\n        psum3 += pref ** 3\n    print(ans)", "for _ in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    prefix = [0]\n    s = 0\n    for i in l:\n        s += i\n        prefix.append(s)\n    c = 0\n    x = 0\n    r = sum(prefix)\n    for i in range(len(prefix)):\n        r -= prefix[i]\n        c += prefix[i] ** 2 * (x - r)\n        x += prefix[i]\n    cal = 0\n    for i in range(len(prefix)):\n        cal += prefix[i] ** 3 * (i - (len(prefix) - (1 + i)))\n    print((cal - 3 * c) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for t in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for _ in range(int(input())):\n    N = int(input())\n    A = list(map(int, input().split()))\n    L = []\n    tem = 0\n    for i in A:\n        L.append(tem)\n        tem += i\n    L.append(tem)\n    A = L[:]\n    N = len(A)\n    tem = 0\n    for i in range(N):\n        tem += A[i] ** 3 * (i - (N - (1 + i)))\n    tem2 = 0\n    l = 0\n    r = sum(A)\n    for i in range(N):\n        r -= A[i]\n        tem2 += A[i] ** 2 * (l - r)\n        l += A[i]\n    print((tem - 3 * tem2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    m = 998244353\n    tp = 0\n    c = []\n    for i in b:\n        c.append(tp)\n        tp = tp + i\n    c.append(tp)\n    b = c[:]\n    tp1 = 0\n    a = len(b)\n    for i in range(a):\n        k = (i - (a - (i + 1))) * (b[i] * b[i] * b[i])\n        tp1 = tp1 + k\n    r = sum(b)\n    l = 0\n    tp2 = 0\n    for i in range(a):\n        r = r - b[i]\n        tp2 = tp2 + (l - r) * (b[i] * b[i])\n        l = l + b[i]\n    ans = tp1 - 3 * tp2\n    ans %= m\n    print(ans)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    A = []\n    temp = 0\n    for i in b:\n        A.append(temp)\n        temp += i\n    A.append(temp)\n    b = A[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (i + 1)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "def mult(a, b, c, d):\n    temp = 0\n    temp = a * b * c * d\n    return temp\n\ndef fill(l1, n, l2):\n    l2.append(l1[0])\n    for i in range(1, n):\n        l2.append(l2[i - 1] + l1[i])\nfor i in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    first1 = []\n    first2 = []\n    fill(l, n, first1)\n    fill(first1, n, first2)\n    result = 0\n    for i in range(n):\n        result += mult(i + 1, first1[i], first1[i], first1[i])\n        if i != 0:\n            result -= mult(3, first1[i], first1[i], first2[i - 1])\n        result -= mult(n - 1 - i, first1[i], first1[i], first1[i])\n        result += mult(3, first2[n - 1] - first2[i], first1[i], first1[i])\n    print(result % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (i + 1)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (i + 1)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "def solve():\n    n = int(input())\n    nums = list(map(int, input().split()))\n    prefixes = [0] * (n + 1)\n    for i in range(1, n + 1):\n        prefixes[i] = prefixes[i - 1] + nums[i - 1]\n    ans = 0\n    tmp1 = 0\n    for i in range(n + 1):\n        tmp1 += prefixes[i] ** 3 * (2 * i - n)\n    tmp2 = 0\n    l = 0\n    r = sum(prefixes)\n    for i in range(n + 1):\n        r -= prefixes[i]\n        tmp2 += prefixes[i] ** 2 * (l - r)\n        l += prefixes[i]\n    print((tmp1 - 3 * tmp2) % 998244353)\n\ndef main():\n    T = int(input())\n    while T:\n        solve()\n        T -= 1\nmain()", "t = int(input())\nfor x in range(t):\n    n = int(input())\n    arr = list(map(int, input().split(' ')))\n    c = []\n    res = 0\n    for i in arr:\n        c.append(res)\n        res += i\n    c.append(res)\n    arr = c[:]\n    n = len(arr)\n    temp = 0\n    for i in range(n):\n        temp += arr[i] ** 3 * (i - (n - (1 + i)))\n    temp1 = 0\n    temp2 = 0\n    temp3 = sum(arr)\n    for i in range(n):\n        temp3 -= arr[i]\n        temp1 += arr[i] ** 2 * (temp2 - temp3)\n        temp2 += arr[i]\n    print((temp - 3 * temp1) % 998244353)", "for _ in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    prefix = [0]\n    s = 0\n    for i in l:\n        s += i\n        prefix.append(s)\n    c = 0\n    x = 0\n    r = sum(prefix)\n    for i in range(len(prefix)):\n        r -= prefix[i]\n        c += prefix[i] ** 2 * (x - r)\n        x += prefix[i]\n    cal = 0\n    for i in range(len(prefix)):\n        cal += prefix[i] ** 3 * (i - (len(prefix) - (1 + i)))\n    print((cal - 3 * c) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    var1 = int(input())\n    var2 = list(map(int, input().split()))\n    var3 = []\n    t = 0\n    for i in var2:\n        var3.append(t)\n        t += i\n    var3.append(t)\n    var2 = var3[:]\n    var1 = len(var2)\n    temp1 = 0\n    for i in range(var1):\n        temp1 += var2[i] ** 3 * (i - (var1 - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(var2)\n    for i in range(var1):\n        right -= var2[i]\n        temp2 += var2[i] ** 2 * (left - right)\n        left += var2[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    m = 998244353\n    tp = 0\n    c = []\n    for i in b:\n        c.append(tp)\n        tp = tp + i\n    c.append(tp)\n    b = c[:]\n    tp1 = 0\n    a = len(b)\n    for i in range(a):\n        k = (i - (a - (i + 1))) * (b[i] * b[i] * b[i])\n        tp1 = tp1 + k\n    r = sum(b)\n    l = 0\n    tp2 = 0\n    for i in range(a):\n        r = r - b[i]\n        tp2 = tp2 + (l - r) * (b[i] * b[i])\n        l = l + b[i]\n    ans = tp1 - 3 * tp2\n    ans %= m\n    print(ans)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for t in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    b = [0] * n\n    c = [0] * n\n    d = [0] * n\n    e = [0] * n\n    a = 0\n    m = 0\n    p = 0\n    q = 0\n    for i in range(n):\n        a = a + l[i]\n        q = q + a\n        m = m + a * a\n        p = p + a * a * a\n        e[i] = a\n        b[i] = q\n        c[i] = m\n        d[i] = p\n    s = d[n - 1]\n    for i in range(1, n):\n        x = (n - i) * e[i - 1] ** 3\n        y = 3 * e[i - 1] * (c[n - 1] - c[i - 1])\n        z = 3 * e[i - 1] ** 2 * (b[n - 1] - b[i - 1])\n        w = d[n - 1] - d[i - 1]\n        s = s + w - x + z - y\n    print(s % 998244353)", "mod = 998244353\nfor i in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    s = [0] * n\n    s1 = 0\n    s2 = 0\n    s3 = 0\n    r1 = a[n - 1] % mod\n    r2 = r1 * r1 % mod\n    r3 = r2 * r1 % mod\n    s1 = r1\n    s2 = r2\n    s3 = r3\n    ans = s3 % mod\n    c = 2\n    for i in range(n - 2, -1, -1):\n        r1 = a[i] % mod\n        r2 = r1 * r1 % mod\n        r3 = r2 * r1 % mod\n        s3 = (s3 + 3 * r2 * s1 + 3 * r1 * s2 + c * r3) % mod\n        s2 = (s2 + 2 * s1 * r1 + c * r2) % mod\n        s1 = (s1 + c * r1) % mod\n        c += 1\n        ans = (ans + s3) % mod\n    print(ans)", "import heapq\nimport operator\nimport itertools\nimport sys\nimport functools\nimport bisect\nimport math\nimport random\nimport statistics\nfrom collections import Counter\nRTM1 = 1000000000.0 + 7\nRTM2 = 998244353\n\ndef fact(n):\n    if n == 1 or n == 0:\n        return 1\n    return n * fact(n - 1)\n\ndef prod(a, b):\n    if a == 0 or b == 0:\n        return 0\n    return a + prod(a, b - 1)\nfor _ in range(int(input())):\n    ravi = int(input())\n    teja = [int(x) for x in input().split()]\n    tr1 = teja[-1] % RTM2\n    tr2 = tr1 * tr1 % RTM2\n    tr3 = tr2 * tr1 % RTM2\n    rt1 = tr1\n    rt2 = tr2\n    rt3 = tr3\n    rtc = 2\n    kamsu = rt3 % RTM2\n    for i in range(ravi - 2, -1, -1):\n        tr1 = teja[i] % RTM2\n        tr2 = tr1 * tr1 % RTM2\n        tr3 = tr2 * tr1 % RTM2\n        rt3 = (rt3 + 3 * tr2 * rt1 + 3 * tr1 * rt2 + rtc * tr3) % RTM2\n        rt2 = (rt2 + 2 * tr1 * rt1 + rtc * tr2) % RTM2\n        rt1 = (rt1 + rtc * tr1) % RTM2\n        rtc += 1\n        kamsu = (kamsu + rt3) % RTM2\n    print(kamsu)", "for i in range(int(input())):\n    n = int(input())\n    l = list(map(int, input().split()))\n    s = []\n    t = 0\n    for j in l:\n        s.append(t)\n        t += j\n    s.append(t)\n    l = s[:]\n    n = len(l)\n    t1 = 0\n    for j in range(n):\n        t1 += l[j] ** 3 * (j - (n - (1 + j)))\n    t2 = 0\n    lft = 0\n    rht = sum(l)\n    for j in range(n):\n        rht -= l[j]\n        t2 += l[j] ** 2 * (lft - rht)\n        lft += l[j]\n    print((t1 - 3 * t2) % 998244353)", "t = int(input())\nfor i in range(t):\n    n = int(input())\n    l1 = []\n    l = list(map(int, input().split()))\n    tem = tem1 = tem2 = counterl = counterr = 0\n    for i in range(n):\n        l1.append(tem)\n        tem += l[i]\n    l1.append(tem)\n    for i in range(n + 1):\n        tem1 = tem1 + l1[i] ** 3 * (i - (n + 1 - (i + 1)))\n    for i in l1:\n        counterr += i\n    for i in range(n + 1):\n        counterr = counterr - l1[i]\n        tem2 += l1[i] ** 2 * (counterl - counterr)\n        counterl = counterl + l1[i]\n    print((tem1 - 3 * tem2) % 998244353)", "t = int(input())\nfor i in range(t):\n    n = int(input())\n    l1 = []\n    l = list(map(int, input().split()))\n    tem = tem1 = tem2 = counterl = counterr = 0\n    for i in range(n):\n        l1.append(tem)\n        tem += l[i]\n    l1.append(tem)\n    for i in range(n + 1):\n        tem1 = tem1 + l1[i] ** 3 * (i - (n + 1 - (i + 1)))\n    counterr = sum(l1)\n    for i in range(n + 1):\n        counterr = counterr - l1[i]\n        tem2 += l1[i] ** 2 * (counterl - counterr)\n        counterl = counterl + l1[i]\n    print((tem1 - 3 * tem2) % 998244353)", "N = 998244353\nfor j in range(int(input())):\n    c = [0]\n    d = [0]\n    d2 = [0]\n    d3 = [0]\n    n = int(input())\n    a = [int(x) for x in input().split()]\n    for i in range(n):\n        c.append(c[i] + a[i])\n        d.append(d[i] + c[i + 1])\n        d2.append(d2[i] + c[i + 1] * c[i + 1])\n        d3.append(d3[i] + c[i + 1] * c[i + 1] * c[i + 1])\n    s = 0\n    for i in range(1, n + 1):\n        s = s + i * c[i] * c[i] * c[i] - 3 * c[i] * c[i] * d[i - 1] + 3 * c[i] * d2[i - 1] - d3[i - 1]\n    s = s % N\n    print(s)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp3 = 0\n    for i in range(a):\n        temp3 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp4 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp4 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp3 - 3 * temp4) % 998244353)", "modulo = 998244353\nfor _ in range(int(input())):\n    n = int(input())\n    hello = list(map(int, input().split()))\n    array = []\n    mcbc = 0\n    array.append(mcbc)\n    for i in hello:\n        mcbc += i\n        array.append(mcbc)\n    n += 1\n    mcbc = 0\n    for i in range(n):\n        mcbc += array[i] ** 3 * (i - (n - (i + 1)))\n    tatti = 0\n    l = 0\n    ravikant = sum(array)\n    for i in array:\n        ravikant -= i\n        tatti += i ** 2 * (l - ravikant)\n        l += i\n    print((mcbc - 3 * tatti) % modulo)", "mod = 998244353\nfor i in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    s = [0] * n\n    s1 = 0\n    s2 = 0\n    s3 = 0\n    rem1 = a[n - 1] % mod\n    rem2 = rem1 * rem1 % mod\n    rem3 = rem2 * rem1 % mod\n    s1 = rem1\n    s2 = rem2\n    s3 = rem3\n    ans = s3 % mod\n    c = 2\n    for i in range(n - 2, -1, -1):\n        rem1 = a[i] % mod\n        rem2 = rem1 * rem1 % mod\n        rem3 = rem2 * rem1 % mod\n        s3 = (s3 + 3 * rem2 * s1 + 3 * rem1 * s2 + c * rem3) % mod\n        s2 = (s2 + 2 * s1 * rem1 + c * rem2) % mod\n        s1 = (s1 + c * rem1) % mod\n        c += 1\n        ans = (ans + s3) % mod\n    print(ans)", "for flag in range(int(input())):\n    first1 = int(input())\n    second2 = list(map(int, input().split()))\n    third3 = []\n    temporary = 0\n    for a in second2:\n        third3.append(temporary)\n        temporary += a\n    third3.append(temporary)\n    second2 = third3[:]\n    first1 = len(second2)\n    temp1 = 0\n    for a in range(first1):\n        temp1 += second2[a] ** 3 * (a - (first1 - (1 + a)))\n    temp2 = 0\n    leftHand = 0\n    rightHand = sum(second2)\n    for a in range(first1):\n        rightHand -= second2[a]\n        temp2 += second2[a] ** 2 * (leftHand - rightHand)\n        leftHand += second2[a]\n    print((temp1 - 3 * temp2) % 998244353)", "for t in range(int(input())):\n    n = int(input())\n    arr = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in arr:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    arr = c[:]\n    n = len(arr)\n    x = 0\n    for i in range(n):\n        x += arr[i] ** 3 * (i - (n - (1 + i)))\n    y = 0\n    left = 0\n    right = sum(arr)\n    for i in range(n):\n        right -= arr[i]\n        y += arr[i] ** 2 * (left - right)\n        left += arr[i]\n    print((x - 3 * y) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for t in range(int(input())):\n    n = int(input())\n    N = list(map(int, input().split()))\n    m = []\n    t = 0\n    for i in N:\n        m.append(t)\n        t += i\n    m.append(t)\n    N = m[:]\n    a = len(N)\n    t1 = 0\n    for i in range(a):\n        t1 += N[i] ** 3 * (i - (a - (1 + i)))\n    t2 = 0\n    l = 0\n    r = sum(N)\n    for i in range(a):\n        r -= N[i]\n        t2 += N[i] ** 2 * (l - r)\n        l += N[i]\n    print((t1 - 3 * t2) % 998244353)", "N = 998244353\nfor j in range(int(input())):\n    c = [0]\n    d = [0]\n    d2 = [0]\n    d3 = [0]\n    n = int(input())\n    a = [int(x) for x in input().split()]\n    for i in range(n):\n        c.append(c[i] + a[i])\n        d.append(d[i] + c[i + 1])\n        d2.append(d2[i] + c[i + 1] * c[i + 1])\n        d3.append(d3[i] + c[i + 1] * c[i + 1] * c[i + 1])\n    s = 0\n    for i in range(1, n + 1):\n        s = s + i * c[i] * c[i] * c[i] - 3 * c[i] * c[i] * d[i - 1] + 3 * c[i] * d2[i - 1] - d3[i - 1]\n    s = s % N\n    print(s)", "for t in range(int(input())):\n    n = int(input())\n    N = list(map(int, input().split()))\n    m = []\n    t = 0\n    for i in N:\n        m.append(t)\n        t += i\n    m.append(t)\n    N = m[:]\n    a = len(N)\n    t1 = 0\n    for i in range(a):\n        t1 += N[i] ** 3 * (i - (a - (1 + i)))\n    t2 = 0\n    l = 0\n    r = sum(N)\n    for i in range(a):\n        r -= N[i]\n        t2 += N[i] ** 2 * (l - r)\n        l += N[i]\n    print((t1 - 3 * t2) % 998244353)", "for t in range(int(input())):\n    n = int(input())\n    a = list(map(int, input().split()))\n    pre = []\n    s = 0\n    for x in a:\n        pre.append(s)\n        s += x\n    pre.append(s)\n    a = pre[:]\n    n = len(a)\n    s1 = 0\n    for i in range(n):\n        s1 += a[i] ** 3 * (i - (n - (i + 1)))\n    s2 = 0\n    l = 0\n    r = sum(a)\n    for i in range(n):\n        r -= a[i]\n        s2 += a[i] ** 2 * (l - r)\n        l += a[i]\n    print((s1 - s2 * 3) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)", "for x in range(int(input())):\n    a = int(input())\n    b = list(map(int, input().split()))\n    c = []\n    temp = 0\n    for i in b:\n        c.append(temp)\n        temp += i\n    c.append(temp)\n    b = c[:]\n    a = len(b)\n    temp1 = 0\n    for i in range(a):\n        temp1 += b[i] ** 3 * (i - (a - (1 + i)))\n    temp2 = 0\n    left = 0\n    right = sum(b)\n    for i in range(a):\n        right -= b[i]\n        temp2 += b[i] ** 2 * (left - right)\n        left += b[i]\n    print((temp1 - 3 * temp2) % 998244353)"]