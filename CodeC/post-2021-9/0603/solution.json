["t = int(input())\nfor _ in range(t):\n    (n, d) = map(int, input().split())\n    a = list(map(int, input().split()))\n    b = list(map(int, input().split()))\n    mx_heat = None\n    for i in range(n - 1, 0, -1):\n        if mx_heat is not None and i * (i + 1) <= mx_heat:\n            break\n        for j in range(i - 1, -1, -1):\n            if mx_heat is not None and (i + 1) * (j + 1) <= mx_heat:\n                break\n            if a[i] <= j + 1:\n                heat = (i + 1) * (j + 1) - d * (b[i] ^ b[j])\n                if mx_heat is None:\n                    mx_heat = heat\n                else:\n                    mx_heat = max(mx_heat, heat)\n            elif a[j] <= i + 1:\n                heat = (i + 1) * (j + 1) - d * (b[i] ^ b[j])\n                if mx_heat is None:\n                    mx_heat = heat\n                else:\n                    mx_heat = max(mx_heat, heat)\n    print(mx_heat)"]