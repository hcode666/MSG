["tc = int(input())\nfor _ in range(tc):\n    n = int(input())\n    k = int(input())\n    adjl = [set() for _ in range(n)]\n    for i in range(k):\n        (u, v) = map(int, input().split())\n        adjl[u - 1].add(v - 1)\n        adjl[v - 1].add(u - 1)\n    maxd = 0\n    md = -1\n    for i in range(n):\n        if len(adjl[i]) > maxd:\n            maxd = len(adjl[i])\n            md = i\n    mf = False\n    for v in adjl[md]:\n        p = set(adjl[v])\n        p.remove(md)\n        p.add(v)\n        if len(p.difference(adjl[md])) != 0:\n            managers = adjl[md].intersection(p)\n            mf = True\n            break\n    if not mf:\n        managers = p\n    managers.add(md)\n    m = len(managers)\n    print(m)\n    d = [0 for i in range(n)]\n    k = 1\n    manx = list(managers)\n    for tm in manx:\n        d[tm] = k\n        for v in adjl[tm]:\n            if not v in managers:\n                d[v] = k\n        k += 1\n    print(*d)\n    print(*[t + 1 for t in manx])", "tc = int(input())\nfor _ in range(tc):\n    n = int(input())\n    k = int(input())\n    adjl = [set() for _ in range(n)]\n    for i in range(k):\n        (u, v) = map(int, input().split())\n        adjl[u - 1].add(v - 1)\n        adjl[v - 1].add(u - 1)\n    maxd = 0\n    md = -1\n    for i in range(n):\n        if len(adjl[i]) > maxd:\n            maxd = len(adjl[i])\n            md = i\n    mf = False\n    for v in adjl[md]:\n        p = set(adjl[v])\n        p.remove(md)\n        p.add(v)\n        if len(p.difference(adjl[md])) != 0:\n            managers = adjl[md].intersection(p)\n            mf = True\n            break\n    if not mf:\n        managers = p\n    managers.add(md)\n    m = len(managers)\n    print(m)\n    d = [0 for i in range(n)]\n    k = 1\n    manx = list(managers)\n    for tm in manx:\n        d[tm] = k\n        for v in adjl[tm]:\n            if not v in managers:\n                d[v] = k\n        k += 1\n    print(*d)\n    print(*[t + 1 for t in manx])"]